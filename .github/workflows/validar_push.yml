name: Push Branch Validator

on:
  push:
    branches:
      - [cite_start]'!main'      # Excluye la rama 'main' [cite: 88, 99]
      - [cite_start]'!master'    # Excluye la rama 'master' [cite: 88, 99]

jobs:
  validate-branch-name:
    runs-on: ubuntu-latest
    steps:
      - [cite_start]name: Check Branch Prefix [cite: 99]
        run: |
          # Obtenemos el nombre de la rama desde la variable de contexto [cite: 99]
          BRANCH_NAME="${{ github.ref_name }}"
          
          echo "Validando el nombre de la rama: $BRANCH_NAME"
          
          # Verificamos si el nombre cumple la convención [cite: 99]
          if echo "$BRANCH_NAME" | grep -Eq '^(feature|bugfix|hotfix)/'; then
            echo "¡Nombre de rama válido! ($BRANCH_NAME)"
            [cite_start]exit 0 # El workflow pasa 
          else
            echo "--- ERROR ---"
            echo "El nombre de la rama '$BRANCH_NAME' NO CUMPLE la convención."
            echo "Debe empezar con 'feature/', 'bugfix/', o 'hotfix/'."
            [cite_start]exit 1 # Hacemos que el workflow falle 
          fi
